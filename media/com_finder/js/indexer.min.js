Joomla=window.Joomla||{},function(e,r){"use strict";e.finderIndexer=function(){var n=null,t=null,s=null,o=!1,a="&"+r.getElementById("finder-indexer-token").getAttribute("name")+"=1",i=function(r){e.request({url:"index.php?option=com_finder&tmpl=component&format=json&task="+r+a,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:function(e,r){l(JSON.parse(e))},onError:function(e){m(e)}})},d=function(e){var n=r.getElementById(e);if(n)return n.parentNode.removeChild(n)},l=function(s,a){var l=r.getElementById("finder-progress-header"),m=r.getElementById("finder-progress-message");try{if(null===s)throw a;if(s.error)throw s;s.start&&(n=s.totalItems),t+=s.batchOffset,u(s.header,s.message),t<n?i("indexer.batch"):o||(o=!0,i("indexer.optimize"))}catch(r){d("progress");try{s.error&&(l&&(l.innerText=s.header,l.classList.add("finder-error")),m&&(m.innerHTML=s.message,m.classList.add("finder-error")))}catch(n){""===r&&(r=e.JText._("COM_FINDER_NO_ERROR_RETURNED")),l&&(l.innerText=e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),l.classList.add("finder-error")),m&&(m.innerHTML=r,m.classList.add("finder-error"))}}return!0},m=function(n){var t=r.getElementById("finder-progress-header"),s=r.getElementById("finder-progress-message");json="object"==typeof n&&n.responseText?n.responseText:null,json=json?JSON.parse(json):null,d("progress"),json&&(json=null!=json.responseText?Json.evaluate(json.responseText,!0):json);var o=json?json.header:e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),a=json?json.message:e.JText._("COM_FINDER_MESSAGE_RETURNED")+"<br>"+json;t&&(t.innerText=o,t.classList.add("finder-error")),s&&(s.innerHTML=a,s.classList.add("finder-error"))},u=function(e,o){s=t/n*100;var a=r.getElementById("progress-bar"),i=r.getElementById("finder-progress-header"),l=r.getElementById("finder-progress-message");i&&(i.innerText=e),l&&(l.innerHTML=o),a&&(s<100?(a.style.width=s+"%",a.setAttribute("aria-valuenow",s)):(a.classList.remove("bar-success"),a.classList.add("bar-warning"),a.setAttribute("aria-valuemin",100),a.setAttribute("aria-valuemax",200),a.style.width=s+"%",a.setAttribute("aria-valuenow",s)),o===msg&&(d("progress"),window.parent.jQuery("#modal-archive",parent.document).modal("hide")))};t=0,s=0,i("indexer.start")}}(Joomla,document),document.addEventListener("DOMContentLoaded",function(){Indexer=Joomla.finderIndexer()});